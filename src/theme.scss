@use "sass:color";
@import "../node_modules/nord/src/sass/nord.scss";

@function invert-color($color) {
    $adjust: if(
        color.whiteness($color) > 60,
        -100%,
        100%,
    );
    @return color.adjust($color, $lightness: $adjust);
}

@mixin theme($text, $background, $inverse, $primary, $secondary, $danger, $success) {
    $adjust: if(
        color.whiteness($text) > color.whiteness($background),
        1,
        -1,
    );
    $adjust-focus: $adjust * 5%;

    /* css */
    --color-text: #{ $text };
    --color-background: #{ $background };
    --color-inverse: #{ $inverse };

    /* primary */
    --color-primary: #{ $primary };
    --color-primary-background: #{ color.mix($primary, $background, 20%) };

    /* secondary */
    --color-secondary: #{ $secondary };
    --color-secondary-background: #{ color.mix($secondary, $background, 20%) };

    /* danger */
    --color-danger: #{ $danger };
    --color-danger-background:  #{ color.mix($danger, $background, 20%) };

    /* success */
    --color-success: #{ $success };
    --color-success-background: #{ color.mix($success, $background, 20%) };
}

:root {
    @include theme(
        /*       text */ lighten($nord6, 5),
        /* background */ darken($nord0, 5),
        /*    inverse */ white,
        /*    primary */ saturate($nord10, 20),
        /*  secondary */ $nord3,
        /*     danger */ saturate($nord11, 20),
        /*    success */ saturate($nord7, 20),
    );

    --filter-focus: brightness(1.1);
    --filter-active: brightness(1.3);

    --box-shadow: 0 1px 3px #{ $nord1 };
    --text-shadow: 0 0 1px #{ $nord1 };
}

.light {
    @include theme(
        /*       text */ darken($nord0, 5),
        /* background */ lighten($nord6, 5),
        /*    inverse */ black,
        /*    primary */ saturate($nord10, 20),
        /*  secondary */ silver,
        /*     danger */ saturate($nord11, 20),
        /*    success */ saturate($nord7, 20),
    );

    --filter-focus: brightness(0.95);
    --filter-active: brightness(0.8);

    --box-shadow: 0 1px 3px #{ $nord4 };
    --text-shadow: 0 0 1px #{ $nord4 };
}
